{"version":3,"sources":["../../../../src/modules/common/env/env.js"],"names":["namespaced","state","chainId","addrPrefix","sdkVersion","apiNode","rpcNode","wsNode","client","apiConnected","rpcConnected","wsConnected","getTXApi","initialized","getters","signingClient","apiTendermint","apiCosmos","apiWS","mutations","SET_CONFIG","config","CONNECT","INITIALIZE_WS_COMPLETE","SET_WS_STATUS","status","SET_API_STATUS","SET_RPC_STATUS","SET_TX_API","txapi","actions","init","dispatch","_actions","root","SpVuexError","setTxAPI","payload","commit","setConnectivity","connection","signIn","signer","useSigner","rootGetters","Client","apiAddr","rpcAddr","wsAddr","on","reconnectWS","reconnectSigningClient","reconnectClient","switchWS","switchAPI","switchRPC","console","error"],"mappings":"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","sourcesContent":["import Client from '@starport/client-js'\nimport SpVuexError from '../../../errors/SpVuexError'\n\nexport default {\n\tnamespaced: true,\n\tstate() {\n\t\treturn {\n\t\t\tchainId: null,\n\t\t\taddrPrefix: '',\n\t\t\tsdkVersion: 'Stargate',\n\t\t\tapiNode: null,\n\t\t\trpcNode: null,\n\t\t\twsNode: null,\n\t\t\tclient: null,\n\t\t\tapiConnected: false,\n\t\t\trpcConnected: false,\n\t\t\twsConnected: false,\n\t\t\tgetTXApi: '',\n\t\t\tinitialized: false\n\t\t}\n\t},\n\tgetters: {\n\t\tclient: (state) => state.client,\n\t\tsigningClient: (state) => state.client.signingClient,\n\t\tapiTendermint: (state) => state.rpcNode,\n\t\tapiCosmos: (state) => state.apiNode,\n\t\tapiWS: (state) => state.wsNode,\n\t\tsdkVersion: (state) => state.sdkVersion,\n\t\tapiConnected: (state) => state.apiConnected,\n\t\trpcConnected: (state) => state.rpcConnected,\n\t\twsConnected: (state) => state.wsConnected,\n\t},\n\tmutations: {\n\t\tSET_CONFIG(state, config) {\n\t\t\tstate.apiNode = config.apiNode\n\t\t\tif (config.rpcNode) {\n\t\t\t\tstate.rpcNode = config.rpcNode\n\t\t\t}\n\t\t\tif (config.wsNode) {\n\t\t\t\tstate.wsNode = config.wsNode\n\t\t\t}\n\t\t},\n\t\tCONNECT(state, { client }) {\n\t\t\tstate.client = client\n\t\t},\n\t\tINITIALIZE_WS_COMPLETE(state) {\n\t\t\tstate.initialized = true\n\t\t},\n\t\tSET_WS_STATUS(state, status) {\n\t\t\tstate.wsConnected = status\n\t\t},\n\t\tSET_API_STATUS(state, status) {\n\t\t\tstate.apiConnected = status\n\t\t},\n\t\tSET_RPC_STATUS(state, status) {\n\t\t\tstate.rpcConnected = status\n\t\t},\n\t\tSET_TX_API(state, txapi) {\n\t\t\tstate.getTXApi = txapi\n\t\t}\n\t},\n\tactions: {\n\t\tasync init(\n\t\t\t{ dispatch },\n\t\t\tconfig = {\n\t\t\t\tapiNode: 'http://localhost:1317',\n\t\t\t\trpcNode: 'http://localhost:26657',\n\t\t\t\twsNode: 'ws://localhost:26657/websocket',\n\t\t\t\tchainId: '',\n\t\t\t\taddrPrefix: '',\n\t\t\t\tsdkVersion: 'Stargate',\n\t\t\t\tgetTXApi: 'http://localhost:26657/tx?hash=0x'\n\t\t\t}\n\t\t) {\n\t\t\tif (this._actions['common/starport/init']) {\n\t\t\t\ttry {\n\t\t\t\t\tawait dispatch('common/starport/init', null, { root: true })\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new SpVuexError(\n\t\t\t\t\t\t'Env:Init:Starport',\n\t\t\t\t\t\t'Could not initialize common/starport module'\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tawait dispatch('config', config)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new SpVuexError('Env:Config', 'Could not configure environment')\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsetTxAPI({ commit }, payload) {\n\t\t\tcommit('SET_TX_API', payload)\n\t\t},\n\t\tasync setConnectivity({ commit }, payload) {\n\t\t\tswitch (payload.connection) {\n\t\t\t\tcase 'ws':\n\t\t\t\t\tcommit('SET_WS_STATUS', payload.status)\n\t\t\t\t\tbreak\n\t\t\t\tcase 'api':\n\t\t\t\t\tcommit('SET_API_STATUS', payload.status)\n\t\t\t\t\tbreak\n\t\t\t\tcase 'rpc':\n\t\t\t\t\tcommit('SET_RPC_STATUS', payload.status)\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tasync signIn({ commit, state }, signer) {\n\t\t\ttry {\n\t\t\t\tawait state.client.useSigner(signer)\n\t\t\t} catch (e) {\n\t\t\t\tthrow new SpVuexError(\n\t\t\t\t\t'Env:Client:Wallet',\n\t\t\t\t\t'Could not create signing client with signer: ' + signer\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\t\tasync config(\n\t\t\t{ commit, rootGetters, state, dispatch },\n\t\t\tconfig = {\n\t\t\t\tapiNode: 'http://localhost:1317',\n\t\t\t\trpcNode: 'http://localhost:26657',\n\t\t\t\twsNode: 'ws://localhost:26657/websocket',\n\t\t\t\tchainId: '',\n\t\t\t\taddrPrefix: '',\n\t\t\t\tsdkVersion: 'Stargate',\n\t\t\t\tgetTXApi: 'http://localhost:26657/tx?hash=0x'\n\t\t\t}\n\t\t) {\n\t\t\ttry {\n\t\t\t\tlet client\n\t\t\t\tif (!state.client) {\n\t\t\t\t\tclient = new Client({\n\t\t\t\t\t\tapiAddr: config.apiNode,\n\t\t\t\t\t\trpcAddr: config.rpcNode,\n\t\t\t\t\t\twsAddr: config.wsNode\n\t\t\t\t\t})\n\t\t\t\t\tclient.on('ws-status', (status) =>\n\t\t\t\t\t\tdispatch('setConnectivity', { connection: 'ws', status: status })\n\t\t\t\t\t)\n\t\t\t\t\tclient.on('api-status', (status) =>\n\t\t\t\t\t\tdispatch('setConnectivity', { connection: 'api', status: status })\n\t\t\t\t\t)\n\t\t\t\t\tclient.on('rpc-status', (status) =>\n\t\t\t\t\t\tdispatch('setConnectivity', { connection: 'rpc', status: status })\n\t\t\t\t\t)\n\t\t\t\t\tcommit('SET_CONFIG', config)\n\t\t\t\t\tcommit('CONNECT', { client })\n\t\t\t\t\tcommit('INITIALIZE_WS_COMPLETE')\n\t\t\t\t} else {\n\t\t\t\t\tclient = state.client\n\t\t\t\t\tlet reconnectWS = false\n\t\t\t\t\tlet reconnectSigningClient = false\n\t\t\t\t\tlet reconnectClient = false\n\t\t\t\t\tif (config.wsNode != state.wsNode) {\n\t\t\t\t\t\treconnectWS = true\n\t\t\t\t\t}\n\t\t\t\t\tif (config.rpcNode != state.rpcNode) {\n\t\t\t\t\t\treconnectSigningClient = true\n\t\t\t\t\t}\n\t\t\t\t\tif (config.apiNode != state.apiNode) {\n\t\t\t\t\t\treconnectClient = true\n\t\t\t\t\t}\n\t\t\t\t\tcommit('SET_CONFIG', config)\n\n\t\t\t\t\tif (reconnectWS && config.wsNode) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait client.switchWS(config.wsNode)\n\t\t\t\t\t\t} catch (e) {\t\t\t\t\t\t\n\t\t\t\t\t\t\tthrow new SpVuexError(\n\t\t\t\t\t\t\t\t'Env:Client:Websocket',\n\t\t\t\t\t\t\t\t'Could not switch to websocket node:' + config.wsNode\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (reconnectClient && config.apiNode) {\n\t\t\t\t\t\tclient.switchAPI(config.apiNode)\n\t\t\t\t\t}\n\t\t\t\t\tif (reconnectSigningClient && config.rpcNode) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait client.switchRPC(config.rpcNode)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthrow new SpVuexError(\n\t\t\t\t\t\t\t\t'Env:Client:TendermintRPC',\n\t\t\t\t\t\t\t\t'Could not switch to Tendermint RPC node:' + config.rpcNode\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t}\n\t}\n}\n"],"file":"env.js"}