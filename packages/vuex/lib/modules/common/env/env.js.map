{"version":3,"sources":["../../../../src/modules/common/env/env.js"],"names":["namespaced","state","chainId","addrPrefix","sdkVersion","apiNode","rpcNode","wsNode","client","chainName","apiConnected","rpcConnected","wsConnected","getTXApi","initialized","getters","signingClient","apiTendermint","apiCosmos","apiWS","mutations","SET_CONFIG","config","CONNECT","INITIALIZE_WS_COMPLETE","SET_CHAIN_ID","SET_CHAIN_NAME","SET_WS_STATUS","status","SET_API_STATUS","SET_RPC_STATUS","SET_TX_API","txapi","actions","init","dispatch","starportUrl","_actions","root","SpVuexError","console","log","setTxAPI","payload","commit","setConnectivity","connection","signIn","signer","useSigner","rootGetters","Client","apiAddr","rpcAddr","wsAddr","setMaxListeners","on","id","name","params","query","reconnectWS","reconnectSigningClient","reconnectClient","switchWS","switchAPI","switchRPC","error"],"mappings":"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","sourcesContent":["import Client from '@starport/client-js'\r\nimport SpVuexError from '../../../errors/SpVuexError'\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tchainId: null,\r\n\t\t\taddrPrefix: '',\r\n\t\t\tsdkVersion: 'Stargate',\r\n\t\t\tapiNode: null,\r\n\t\t\trpcNode: null,\r\n\t\t\twsNode: null,\r\n\t\t\tclient: null,\r\n\t\t\tchainName: null,\r\n\t\t\tapiConnected: false,\r\n\t\t\trpcConnected: false,\r\n\t\t\twsConnected: false,\r\n\t\t\tgetTXApi: '',\r\n\t\t\tinitialized: false\r\n\t\t}\r\n\t},\r\n\tgetters: {\r\n\t\tclient: (state) => state.client,\r\n\t\tsigningClient: (state) => state.client.signingClient,\r\n\t\tchainId: (state) => state.chainId,\r\n\t\tchainName: (state) => state.chainName,\r\n\t\taddrPrefix: (state) => state.addrPrefix,\r\n\t\tapiTendermint: (state) => state.rpcNode,\r\n\t\tapiCosmos: (state) => state.apiNode,\r\n\t\tapiWS: (state) => state.wsNode,\r\n\t\tsdkVersion: (state) => state.sdkVersion,\r\n\t\tapiConnected: (state) => state.apiConnected,\r\n\t\trpcConnected: (state) => state.rpcConnected,\r\n\t\twsConnected: (state) => state.wsConnected,\r\n\t},\r\n\tmutations: {\r\n\t\tSET_CONFIG(state, config) {\r\n\t\t\tstate.apiNode = config.apiNode\r\n\t\t\tif (config.rpcNode) {\r\n\t\t\t\tstate.rpcNode = config.rpcNode\r\n\t\t\t}\r\n\t\t\tif (config.wsNode) {\r\n\t\t\t\tstate.wsNode = config.wsNode\r\n\t\t\t}\t\r\n\t\t\tif (config.chainId) {\r\n\t\t\t\tstate.chainId=config.chainId\r\n\t\t\t}\t\r\n\t\t\tif (config.addrPrefix) {\r\n\t\t\t\tstate.addrPrefix=config.addrPrefix\r\n\t\t\t}\t\r\n\t\t\tif (config.sdkVersion) {\r\n\t\t\t\tstate.sdkVersion=config.sdkVersion\r\n\t\t\t}\r\n\t\t\tif (config.getTXApi) {\r\n\t\t\t\tstate.getTXApi=config.getTXApi\r\n\t\t\t}\r\n\t\t},\r\n\t\tCONNECT(state, { client }) {\r\n\t\t\tstate.client = client\r\n\t\t},\r\n\t\tINITIALIZE_WS_COMPLETE(state) {\r\n\t\t\tstate.initialized = true\r\n\t\t},\r\n\t\tSET_CHAIN_ID(state, chainId) {\r\n\t\t\tstate.chainId = chainId\r\n\t\t},\r\n\t\tSET_CHAIN_NAME(state, chainName) {\r\n\t\t\tstate.chainName = chainName\r\n\t\t},\r\n\t\tSET_WS_STATUS(state, status) {\r\n\t\t\tstate.wsConnected = status\r\n\t\t},\r\n\t\tSET_API_STATUS(state, status) {\r\n\t\t\tstate.apiConnected = status\r\n\t\t},\r\n\t\tSET_RPC_STATUS(state, status) {\r\n\t\t\tstate.rpcConnected = status\r\n\t\t},\r\n\t\tSET_TX_API(state, txapi) {\r\n\t\t\tstate.getTXApi = txapi\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tasync init(\r\n\t\t\t{ dispatch },\r\n\t\t\tconfig = {\r\n\t\t\t\tstarportUrl: 'http://localhost:12345',\r\n\t\t\t\tapiNode: 'http://localhost:1317',\r\n\t\t\t\trpcNode: 'http://localhost:26657',\r\n\t\t\t\twsNode: 'ws://localhost:26657/websocket',\r\n\t\t\t\tchainId: '',\r\n\t\t\t\taddrPrefix: '',\r\n\t\t\t\tchainName: '',\r\n\t\t\t\tsdkVersion: 'Stargate',\r\n\t\t\t\tgetTXApi: 'http://localhost:26657/tx?hash=0x'\r\n\t\t\t}\r\n\t\t) {\r\n\t\t\tif (this._actions['common/starport/init']) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait dispatch('common/starport/init', null, { root: true })\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthrow new SpVuexError(\r\n\t\t\t\t\t\t'Env:Init:Starport',\r\n\t\t\t\t\t\t'Could not initialize common/starport module'\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait dispatch('config', config)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthrow new SpVuexError('Env:Config', 'Could not configure environment')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconsole.log('Vuex nodule: common.env initialized!')\r\n\t\t},\r\n\t\tsetTxAPI({ commit }, payload) {\r\n\t\t\tcommit('SET_TX_API', payload)\r\n\t\t},\r\n\t\tasync setConnectivity({ commit }, payload) {\r\n\t\t\tswitch (payload.connection) {\r\n\t\t\t\tcase 'ws':\r\n\t\t\t\t\tcommit('SET_WS_STATUS', payload.status)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'api':\r\n\t\t\t\t\tcommit('SET_API_STATUS', payload.status)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'rpc':\r\n\t\t\t\t\tcommit('SET_RPC_STATUS', payload.status)\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync signIn({ commit, state }, signer) {\r\n\t\t\ttry {\r\n\t\t\t\tawait state.client.useSigner(signer)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow new SpVuexError(\r\n\t\t\t\t\t'Env:Client:Wallet',\r\n\t\t\t\t\t'Could not create signing client with signer: ' + signer\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync config(\r\n\t\t\t{ commit, rootGetters, state, dispatch },\r\n\t\t\tconfig = {\r\n\t\t\t\tapiNode: 'http://localhost:1317',\r\n\t\t\t\trpcNode: 'http://localhost:26657',\r\n\t\t\t\twsNode: 'ws://localhost:26657/websocket',\r\n\t\t\t\tchainName: '',\r\n\t\t\t\tchainId: '',\r\n\t\t\t\taddrPrefix: '',\r\n\t\t\t\tsdkVersion: 'Stargate',\r\n\t\t\t\tgetTXApi: 'http://localhost:26657/tx?hash=0x'\r\n\t\t\t}\r\n\t\t) {\r\n\t\t\ttry {\r\n\t\t\t\tlet client\r\n\t\t\t\tif (!state.client) {\r\n\t\t\t\t\tclient = new Client({\r\n\t\t\t\t\t\tapiAddr: config.apiNode,\r\n\t\t\t\t\t\trpcAddr: config.rpcNode,\r\n\t\t\t\t\t\twsAddr: config.wsNode\r\n\t\t\t\t\t})\r\n\t\t\t\t\tclient.setMaxListeners(0)\r\n\t\t\t\t\tclient.on('chain-id', (id) => {\r\n\t\t\t\t\t\tcommit('SET_CHAIN_ID',id) \r\n\t\t\t\t\t})\r\n\t\t\t\t\tclient.on('chain-name', (name) => {\r\n\t\t\t\t\t\tcommit('SET_CHAIN_NAME',name) \r\n\t\t\t\t\t})\r\n\t\t\t\t\tclient.on('ws-status', (status) =>\r\n\t\t\t\t\t\tdispatch('setConnectivity', { connection: 'ws', status: status })\r\n\t\t\t\t\t)\r\n\t\t\t\t\tclient.on('api-status', (status) =>\r\n\t\t\t\t\t\tdispatch('setConnectivity', { connection: 'api', status: status })\r\n\t\t\t\t\t)\r\n\t\t\t\t\tclient.on('rpc-status', (status) =>\r\n\t\t\t\t\t\tdispatch('setConnectivity', { connection: 'rpc', status: status })\r\n\t\t\t\t\t)\r\n\t\t\t\t\tcommit('SET_CONFIG', config)\r\n\t\t\t\t\tawait dispatch('cosmos.staking.v1beta1/QueryParams', {params: {},query:null }, { root: true })\r\n\t\t\t\t\tawait dispatch('cosmos.bank.v1beta1/QueryTotalSupply', {params: {},query:null }, { root: true })\r\n\t\t\t\t\tcommit('CONNECT', { client })\r\n\t\t\t\t\tcommit('INITIALIZE_WS_COMPLETE')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclient = state.client\r\n\t\t\t\t\tlet reconnectWS = false\r\n\t\t\t\t\tlet reconnectSigningClient = false\r\n\t\t\t\t\tlet reconnectClient = false\r\n\t\t\t\t\tif (config.wsNode != state.wsNode) {\r\n\t\t\t\t\t\treconnectWS = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (config.rpcNode != state.rpcNode) {\r\n\t\t\t\t\t\treconnectSigningClient = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (config.apiNode != state.apiNode) {\r\n\t\t\t\t\t\treconnectClient = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcommit('SET_CONFIG', config)\r\n\r\n\t\t\t\t\tif (reconnectWS && config.wsNode) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tawait client.switchWS(config.wsNode)\r\n\t\t\t\t\t\t} catch (e) {\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthrow new SpVuexError(\r\n\t\t\t\t\t\t\t\t'Env:Client:Websocket',\r\n\t\t\t\t\t\t\t\t'Could not switch to websocket node:' + config.wsNode\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (reconnectClient && config.apiNode) {\r\n\t\t\t\t\t\tclient.switchAPI(config.apiNode)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (reconnectSigningClient && config.rpcNode) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tawait client.switchRPC(config.rpcNode)\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthrow new SpVuexError(\r\n\t\t\t\t\t\t\t\t'Env:Client:TendermintRPC',\r\n\t\t\t\t\t\t\t\t'Could not switch to Tendermint RPC node:' + config.rpcNode\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}catch (e) {\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],"file":"env.js"}