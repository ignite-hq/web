{"version":3,"sources":["../../../../src/modules/common/starport/starport.js"],"names":["process","env","VUE_APP_CUSTOM_URL","VUE_APP_API_COSMOS","VUE_APP_API_TENDERMINT","VUE_APP_WS_TENDERMINT","VUE_APP_ADDRESS_PREFIX","GITPOD","URL","apiNode","protocol","hostname","replace","rpcNode","addrPrefix","wsNode","namespaced","state","_timer","starportUrl","frontendUrl","backend","node_js","vue_app_custom_url","running","frontend","rpc","api","prevStates","getters","backendEnv","backendRunningStates","wasAppRestarted","status","is_consensus_engine_alive","is_my_app_backend_alive","mutations","SET_STARPORT_ENV","SET_BACKEND_RUNNING_STATES","SET_BACKEND_ENV","SET_PREV_STATES","is_my_app_frontend_alive","SET_TIMER","timer","CLEAR_TIMER","clearInterval","actions","setStatusState","commit","dispatch","rootGetters","axios","get","data","chainId","chain_id","sdkVersion","sdk_version","getTXApi","root","window","location","reload","SpVuexError","init","setInterval","console","error"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport SpVuexError from '../../../errors/SpVuexError'\r\n\r\nconst {\r\n\tVUE_APP_CUSTOM_URL,\r\n\tVUE_APP_API_COSMOS,\r\n\tVUE_APP_API_TENDERMINT,\r\n\tVUE_APP_WS_TENDERMINT,\r\n\tVUE_APP_ADDRESS_PREFIX\r\n} = process.env\r\n\r\nconst GITPOD =\r\n\tprocess.env.VUE_APP_CUSTOM_URL && new URL(process.env.VUE_APP_CUSTOM_URL)\r\nconst apiNode =\r\n\t(GITPOD && `${GITPOD.protocol}//1317-${GITPOD.hostname}`) ||\r\n\t(process.env.VUE_APP_API_COSMOS &&\r\n\t\tprocess.env.VUE_APP_API_COSMOS.replace('0.0.0.0', 'localhost')) ||\r\n\t'http://localhost:1317'\r\nconst rpcNode =\r\n\t(GITPOD && `${GITPOD.protocol}//26657-${GITPOD.hostname}`) ||\r\n\t(process.env.VUE_APP_API_TENDERMINT &&\r\n\t\tprocess.env.VUE_APP_API_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t'http://localhost:26657'\r\nconst addrPrefix = process.env.VUE_APP_ADDRESS_PREFIX || 'cosmos'\r\nconst wsNode =\r\n\t(GITPOD && `wss://26657-${GITPOD.hostname}/websocket`) ||\r\n\t(process.env.VUE_APP_WS_TENDERMINT &&\r\n\t\tprocess.env.VUE_APP_WS_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t'ws://localhost:26657/websocket'\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\t_timer: null,\r\n\t\t\tstarportUrl: VUE_APP_CUSTOM_URL ? '' : 'http://localhost:12345',\r\n\t\t\tfrontendUrl: '',\r\n\t\t\tbackend: {\r\n\t\t\t\tenv: {\r\n\t\t\t\t\tnode_js: false,\r\n\t\t\t\t\tvue_app_custom_url: process.env.VUE_APP_CUSTOM_URL\r\n\t\t\t\t},\r\n\t\t\t\trunning: {\r\n\t\t\t\t\tfrontend: false,\r\n\t\t\t\t\trpc: false,\r\n\t\t\t\t\tapi: false\r\n\t\t\t\t},\r\n\t\t\t\tprevStates: {\r\n\t\t\t\t\tfrontend: null,\r\n\t\t\t\t\trpc: null,\r\n\t\t\t\t\tapi: null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetters: {\r\n\t\tbackendEnv: (state) => state.backend.env,\r\n\t\tfrontendUrl: (state) => state.frontendUrl,\r\n\t\tbackendRunningStates: (state) => state.backend.running,\r\n\t\twasAppRestarted: (state) => (status) => {\r\n\t\t\treturn (\r\n\t\t\t\tstate.backend.prevStates.rpc !== null &&\r\n\t\t\t\tstate.backend.prevStates.api !== null &&\r\n\t\t\t\t!state.backend.prevStates.rpc &&\r\n\t\t\t\t!state.backend.prevStates.api &&\r\n\t\t\t\tstatus.is_consensus_engine_alive &&\r\n\t\t\t\tstatus.is_my_app_backend_alive\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tmutations: {\r\n\t\tSET_STARPORT_ENV(state, { starportUrl, frontendUrl }) {\r\n\t\t\tstate.starportUrl = starportUrl\r\n\t\t\tstate.frontendUrl = frontendUrl\r\n\t\t},\r\n\t\tSET_BACKEND_RUNNING_STATES(state, { frontend, rpc, api }) {\r\n\t\t\tstate.backend.running = {\r\n\t\t\t\tfrontend,\r\n\t\t\t\trpc,\r\n\t\t\t\tapi\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t *\r\n\t\t * @param {object} state\r\n\t\t * @param {object} env\r\n\t\t * @param {boolean} states.node_js\r\n\t\t * @param {string} states.vue_app_custom_url\r\n\t\t *\r\n\t\t *\r\n\t\t */\r\n\t\tSET_BACKEND_ENV(state, { node_js, vue_app_custom_url }) {\r\n\t\t\tstate.backend.env = {\r\n\t\t\t\tnode_js,\r\n\t\t\t\tvue_app_custom_url\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t *\r\n\t\t * @param {object} state\r\n\t\t * @param {object} payload\r\n\t\t * @param {object} payload.status\r\n\t\t *\r\n\t\t *\r\n\t\t */\r\n\t\tSET_PREV_STATES(state, { status }) {\r\n\t\t\tstate.backend.prevStates = {\r\n\t\t\t\tfrontend: status ? status.is_my_app_frontend_alive : false,\r\n\t\t\t\trpc: status ? status.is_consensus_engine_alive : false,\r\n\t\t\t\tapi: status ? status.is_my_app_backend_alive : false\r\n\t\t\t}\r\n\t\t},\r\n\t\tSET_TIMER(state, { timer }) {\r\n\t\t\tstate._timer = timer\r\n\t\t},\r\n\t\tCLEAR_TIMER(state) {\r\n\t\t\tclearInterval(state._timer)\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tasync setStatusState({ state, getters, commit, dispatch, rootGetters }) {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await axios.get(`${state.starportUrl}/status`)\r\n\t\t\t\tconst { status, env } = data\r\n\r\n\t\t\t\tconst GITPOD = env.vue_app_custom_url && new URL(env.vue_app_custom_url)\r\n\r\n\t\t\t\tconst starportUrl =\r\n\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//12345-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t'http://localhost:12345'\r\n\r\n\t\t\t\tconst frontendUrl =\r\n\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//8080-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t'http://localhost:8080'\r\n\r\n\t\t\t\tcommit('SET_STARPORT_ENV', {\r\n\t\t\t\t\tstarportUrl,\r\n\t\t\t\t\tfrontendUrl\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst chainId = env.chain_id\r\n\t\t\t\tconst sdkVersion = status.sdk_version\r\n\t\t\t\tconst apiNode =\r\n\t\t\t\t\t(VUE_APP_API_COSMOS &&\r\n\t\t\t\t\t\tVUE_APP_API_COSMOS.replace('0.0.0.0', 'localhost')) ||\r\n\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//1317-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t'http://localhost:1317'\r\n\r\n\t\t\t\tconst rpcNode =\r\n\t\t\t\t\t(VUE_APP_API_TENDERMINT &&\r\n\t\t\t\t\t\tVUE_APP_API_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//26657-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t'http://localhost:26657'\r\n\r\n\t\t\t\tconst wsNode =\r\n\t\t\t\t\t(VUE_APP_WS_TENDERMINT &&\r\n\t\t\t\t\t\tVUE_APP_WS_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t\t\t\t\t(GITPOD && `wss://26657-${GITPOD.hostname}/websocket`) ||\r\n\t\t\t\t\t'ws://localhost:26657/websocket'\r\n\r\n\t\t\t\tconst addrPrefix = VUE_APP_ADDRESS_PREFIX || 'cosmos'\r\n\r\n\t\t\t\tconst getTXApi =\r\n\t\t\t\t\trootGetters['common/env/sdkVersion'] === 'Stargate'\r\n\t\t\t\t\t\t? dispatch(\r\n\t\t\t\t\t\t\t\t'common/env/setTxAPI',\r\n\t\t\t\t\t\t\t\trootGetters['common/env/apiTendermint'] + '/tx?hash=0x',\r\n\t\t\t\t\t\t\t\t{ root: true }\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: dispatch(\r\n\t\t\t\t\t\t\t\t'common/env/setTxAPI',\r\n\t\t\t\t\t\t\t\trootGetters['common/env/apiCosmos'] + '/txs/',\r\n\t\t\t\t\t\t\t\t{ root: true }\r\n\t\t\t\t\t\t  )\r\n\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\t'common/env/config',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchainId,\r\n\t\t\t\t\t\tsdkVersion,\r\n\t\t\t\t\t\tapiNode,\r\n\t\t\t\t\t\trpcNode,\r\n\t\t\t\t\t\twsNode,\r\n\t\t\t\t\t\taddrPrefix,\r\n\t\t\t\t\t\tgetTXApi\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ root: true }\r\n\t\t\t\t)\r\n\r\n\t\t\t\tcommit('SET_BACKEND_RUNNING_STATES', {\r\n\t\t\t\t\tfrontend: status.is_my_app_frontend_alive,\r\n\t\t\t\t\trpc: status.is_consensus_engine_alive,\r\n\t\t\t\t\tapi: status.is_my_app_backend_alive\r\n\t\t\t\t})\r\n\t\t\t\tcommit('SET_BACKEND_ENV', {\r\n\t\t\t\t\tnode_js: env.node_js,\r\n\t\t\t\t\tvue_app_custom_url: env.vue_app_custom_url\r\n\t\t\t\t})\r\n\r\n\t\t\t\t/**\r\n         *\r\n         // If backend was down, but alive now,\r\n         // it indicates the app is restarting.\r\n         // Forcing browser to reload in this case to reset blockchain data.\r\n         *\r\n         */\r\n\t\t\t\tif (getters.wasAppRestarted(status)) {\r\n\t\t\t\t\twindow.location.reload(false)\r\n\t\t\t\t}\r\n\t\t\t\tcommit('SET_PREV_STATES', { status })\r\n\t\t\t} catch (error) {\t\t\t\t\r\n\t\t\t\tcommit('SET_BACKEND_RUNNING_STATES', {\r\n\t\t\t\t\tfrontend: false,\r\n\t\t\t\t\trpc: false,\r\n\t\t\t\t\tapi: false\r\n\t\t\t\t})\r\n\r\n\t\t\t\tcommit('SET_PREV_STATES', { status: null })\r\n\r\n\t\t\t\tthrow new SpVuexError(\r\n\t\t\t\t\t'Starport:Status',\r\n\t\t\t\t\t'Could not set status from starport'\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync init({ commit, dispatch }) {\r\n\t\t\t/*\r\n      *\r\n      // Fetch backend status regularly\r\n      *\r\n      */\r\n\t\t\tcommit('SET_TIMER', {\r\n\t\t\t\ttimer: setInterval(async () => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait dispatch('setStatusState')\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 5000)\r\n\t\t\t})\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'common/env/config',\r\n\t\t\t\t{\r\n\t\t\t\t\tapiNode,\r\n\t\t\t\t\trpcNode,\r\n\t\t\t\t\twsNode,\r\n\t\t\t\t\taddrPrefix\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n"],"file":"starport.js"}